(this.webpackJsonpmuscle_spelling=this.webpackJsonpmuscle_spelling||[]).push([[0],{62:function(e,t,a){e.exports=a.p+"static/media/success.a8e58690.mp3"},63:function(e,t,a){e.exports=a.p+"static/media/fail.23730a41.mp3"},78:function(e,t,a){e.exports=a(91)},83:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(16),l=a.n(i),o=(a(83),a(56)),u=a.n(o),s=a(64),d=a(15),f=(a(50),a(133)),p=a(127),m=a(128),h=a(129),g=a(130),b=a(140),y=a(137),v=a(134),E=a(138),w=a(46),x=a(26),j=a(136),S=a(135),O=a(65),k=a.n(O),C=a(124);!function(e){e[e.Faded=0]="Faded",e[e.Correct=1]="Correct",e[e.Highlight=2]="Highlight"}(n||(n={}));var D,A,P=function(e){switch(e){case n.Faded:return"#eee";case n.Correct:return"green";case n.Highlight:return"brown";default:return"#eee"}},L=function(e){var t=e.word;return c.a.createElement(f.a,{display:"flex",flexDirection:"row"},t.map((function(e,t){return c.a.createElement(f.a,{key:t,paddingRight:"7px"},c.a.createElement(C.a,{elevation:3},c.a.createElement(f.a,{width:"35px",height:"55px",textAlign:"center",fontSize:"45px",lineHeight:"1",color:P(e?e.type:void 0)},e?e.char:"_")))})))},F=c.a.createContext(void 0),W="abcdefghijklmnopqrstuvwxyz0123456789".split(""),I=function(e){var t=e.rate,a=e.blind,r=e.targetWord,i=e.sayWord,l=e.commonErrorWord,o=e.onSuccess,u=e.onFail,s=c.a.useRef(),p=c.a.useState(""),m=Object(d.a)(p,2),h=m[0],g=m[1],b=h.length,y=c.a.useContext(F);c.a.useEffect((function(){var e=new SpeechSynthesisUtterance(i||r);return e.voice=speechSynthesis.getVoices().find((function(e){return e.name.includes(y||"English")})),t&&(e.rate=t),e.lang="en-UK",window.speechSynthesis.speak(e),function(){return window.speechSynthesis.cancel()}}),[t,i,r,y]),c.a.useEffect((function(){var e=r.split("")[b];s.current&&(W.filter((function(t){return t!==e})).forEach((function(e){return s.current.physicalKeyboard.handleHighlightKeyUp({key:e,code:"key"})})),s.current.physicalKeyboard.handleHighlightKeyDown({key:e,code:"key"}))}),[b,r,i,t]),c.a.useEffect((function(){var e=function(e){var t=e.key;W.includes(t)&&(r.split("")[b]===t?b===r.length-1?(o(),window.gtag("event","success",{eventLabel:i||r})):g((function(e){return e+t})):(u(h+t),window.gtag("event","fail",{eventLabel:i||r})))};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[u,o,b,r,g,h,i]);var v=l?r.split("").findIndex((function(e,t){return l.split("")[t]!==e})):void 0;return c.a.createElement(f.a,{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},c.a.createElement(f.a,{display:"flex",flexDirection:"row",margin:"10px"},c.a.createElement(L,{word:r.split("").map((function(e,t){return!a&&void 0!==v&&t===v&&t>=b?{char:e,type:n.Highlight}:!a||t<b?{char:e,type:t<b?n.Correct:n.Faded}:void 0}))})),!a&&c.a.createElement(f.a,{paddingTop:"80px",paddingX:"80px",alignSelf:"stretch"},c.a.createElement(k.a,{keyboardRef:function(e){s.current=e},onChange:function(){},onKeyPress:function(){}})))},N=a(41),B=a(62),T=a(63);!function(e){e.Success="SUCCESS",e.Fail="FAIL",e.Play="PLAY",e.Blind="BLIND"}(A||(A={}));var H=Object(j.a)({id:"success",initial:A.Blind,context:{},states:(D={},Object(x.a)(D,A.Play,{on:{success:A.Blind,fail:A.Fail}}),Object(x.a)(D,A.Blind,{on:{success:A.Success,fail:A.Fail}}),Object(x.a)(D,A.Fail,{after:{200:{target:A.Play,actions:[]}}}),Object(x.a)(D,A.Success,{after:{1e3:A.Blind}}),D)});var R,V,z=function(e){var t=e.words,a=e.multiply,n=e.onResult,r=c.a.useState((function(){for(var e=[],n=0;n<a;n++)e.push.apply(e,Object(w.a)(t));return function(e){for(var t=e,a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=t[a];t[a]=t[n],t[n]=r}return t}(e)})),i=Object(d.a)(r,1)[0],l=c.a.useState((function(){return t.reduce((function(e,t){return console.log("re-reduce"),e[t]={failedAttempts:0},e}),{})})),o=Object(d.a)(l,2),u=o[0],s=o[1],p=Object(N.a)(B),m=Object(d.a)(p,1)[0],h=Object(N.a)(T),g=Object(d.a)(h,1)[0],b=Object(S.a)(H),y=Object(d.a)(b,2),v=y[0].value,E=y[1],x=c.a.useState(0),j=Object(d.a)(x,2),O=j[0],k=j[1],C=c.a.useState(void 0),D=Object(d.a)(C,2),P=D[0],L=D[1],F=i[O%i.length];return c.a.useEffect((function(){O===i.length&&n(u)}),[u,O,n,i]),v===A.Play?c.a.createElement(I,{key:"play",blind:!1,targetWord:F,commonErrorWord:P,onSuccess:function(){E({type:"success"}),m()},onFail:function(e){s((function(e){return e[F].failedAttempts++,e})),L(e),E({type:"fail"}),g()}}):v===A.Blind?c.a.createElement(I,{key:"blind",blind:!0,targetWord:F,onSuccess:function(){E({type:"success"}),m(),k((function(e){return e+1}))},onFail:function(e){s((function(e){return e[F].failedAttempts++,e})),L(e),E({type:"fail"}),g()}}):v===A.Success?c.a.createElement(f.a,{position:"fixed",width:"100%",height:"100%",style:{backgroundColor:"green"}}):c.a.createElement(f.a,{position:"fixed",width:"100%",height:"100%",style:{backgroundColor:"red"}})},K=a(70),M=new(a.n(K).a),U=a(62),$=a(63);!function(e){e.Success="SUCCESS",e.Fail="FAIL",e.Play="PLAY"}(V||(V={}));var q,_=Object(j.a)({id:"success",initial:V.Play,context:{},states:(R={},Object(x.a)(R,V.Play,{on:{success:V.Play,fail:V.Fail}}),Object(x.a)(R,V.Fail,{after:{200:{target:V.Play,actions:[]}}}),Object(x.a)(R,V.Success,{after:{1e3:V.Play}}),R)});!function(e){e.Letters="abcdefghijklmnopqrstuvwxyz",e.Numbers="0123456789",e.NumbersDoubleAndTriple="0123456789DT",e.AlphaNumeric="abcdefghijklmnopqrstuvwxyz0123456789",e.Word="word"}(q||(q={}));var J=function(e,t,a){return Object(w.a)(new Array(a)).map((function(a){return e===q.Word?M.createWord(t).split("").join(". "):function(e,t){return Object(w.a)(new Array(t)).map((function(t){return Math.floor(Math.random()*e.length)})).map((function(t){var a=e[t];if(e===q.NumbersDoubleAndTriple&&("D"===a||"T"===a)){var n=q.Numbers[Math.floor(Math.random()*q.Numbers.length)];return"".concat("D"===a?"double":"triple"," ").concat(n)}return a})).join(". ")}(e,t)}))},Y=function(e){var t=e.length,a=e.rate,n=e.type,r=c.a.useState(J(n,t,100)),i=Object(d.a)(r,1)[0],l=c.a.useState(0),o=Object(d.a)(l,2),u=o[0],s=o[1],p=i[u%i.length],m=p.replace(/double (\d)/g,"$1$1").replace(/triple (\d)/g,"$1$1$1").replace(/\s/g,"").replace(/\./g,"").replace(/,/g,""),h=p,g=Object(N.a)(U),b=Object(d.a)(g,1)[0],y=Object(N.a)($),v=Object(d.a)(y,1)[0],E=Object(S.a)(_),w=Object(d.a)(E,2),x=w[0].value,j=w[1];return x===V.Play?c.a.createElement(I,{key:u,blind:!0,rate:a,targetWord:m,sayWord:"It is ".concat(h),onSuccess:function(){j({type:"success"}),b(),s((function(e){return e+1}))},onFail:function(e){e.length>1&&console.log("".concat(p,"\n").concat(e," <-- error")),j({type:"fail"}),v(),s((function(e){return e+1}))}}):x===V.Success?c.a.createElement(f.a,{position:"fixed",width:"100%",height:"100%",style:{backgroundColor:"green"}}):c.a.createElement(f.a,{position:"fixed",width:"100%",height:"100%",style:{backgroundColor:"red"}})},X=a(139),G=a(131),Q=["beautiful","didactic","esteem","Unfortunately","curiosity","believe","Interesting","quickly","processor","Rabbit","cancelled","inspiration","Possibly","especially","improvement","existing","happening","allowed","behavior","crucial","Existing","stretch","shuffle"].map((function(e){return e.toLocaleLowerCase()})),Z={letters:q.Letters,numbers:q.Numbers,numbersDT:q.NumbersDoubleAndTriple,"alpha-numeric":q.AlphaNumeric,word:q.Word};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement((function(){var e=c.a.useState("letters"),t=Object(d.a)(e,2),a=t[0],n=t[1],i=c.a.useState(!1),l=Object(d.a)(i,2),o=l[0],w=l[1],x=c.a.useState(1),j=Object(d.a)(x,2),S=j[0],O=j[1],k=c.a.useState(6),C=Object(d.a)(k,2),D=C[0],A=C[1],P=c.a.useState(!1),L=Object(d.a)(P,2),W=L[0],I=L[1],N=c.a.useState(Q),B=Object(d.a)(N,2),T=B[0],H=B[1],R=c.a.useState(void 0),V=Object(d.a)(R,2),K=V[0],M=V[1],U=c.a.useState([]),$=Object(d.a)(U,2),q=$[0],_=$[1];Object(r.useEffect)((function(){Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=_,e.next=3,new Promise((function(e,t){var a,n=window.speechSynthesis;a=setInterval((function(){0!==n.getVoices().length&&(e(n.getVoices()),clearInterval(a))}),10)}));case 3:e.t1=function(e){return e.name},e.t2=function(e){return e.includes("nglish")},e.t3=e.sent.map(e.t1).filter(e.t2),(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})))()}),[]);var J=c.a.useState("Default voice"),ee=Object(d.a)(J,2),te=ee[0],ae=ee[1];return W?c.a.createElement(F.Provider,{value:te},c.a.createElement(Y,{length:D,rate:S,type:Z[a]})):o?c.a.createElement(F.Provider,{value:te},c.a.createElement(z,{onResult:function(e){console.log(e);var t=Object.entries(e).sort((function(e,t){return t[1].failedAttempts-e[1].failedAttempts})).map((function(e){return{word:e[0],failedAttempts:e[1].failedAttempts}}));M(t);var a=t.map((function(e){return e.word}));H(a),w(!1)},multiply:3,words:T.filter((function(e){return e.length>0})).map((function(e){return e.toLocaleLowerCase()})).map((function(e){return e.trim()}))})):c.a.createElement(f.a,{position:"absolute",top:"10px",bottom:"10px",left:"10px",right:"10px",display:"flex",flexDirection:"row",justifyContent:"space-around"},c.a.createElement(f.a,{display:"flex",flexDirection:"column",alignItems:"top"},c.a.createElement(f.a,{m:"10px",fontSize:"25px"},"Practice spelling:"),K&&K.map((function(e,t){return c.a.createElement(f.a,{key:t},e.failedAttempts," - ",e.word)})),c.a.createElement(p.a,{value:T.join("\n"),onChange:function(e){if(e.target&&e.target.value){var t=e.target.value;H(t.toLocaleString().split("\n")),console.log(t)}}}),c.a.createElement(m.a,{onClick:function(){return w(!0)}},"Start")),c.a.createElement(f.a,{display:"flex",flexDirection:"column",alignItems:"center"},c.a.createElement(f.a,{m:"10px",fontSize:"25px"},"Practice writing down when dictated:"),c.a.createElement(f.a,{width:"200px"},"Speech Rate: ",S,c.a.createElement(E.a,{value:S,onChange:function(e,t){return O(t)},defaultValue:1,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:.1,min:.3,max:2})),c.a.createElement(f.a,{width:"200px"},"Length: ",D,c.a.createElement(E.a,{value:D,onChange:function(e,t){return A(t)},defaultValue:6,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:3,max:15})),c.a.createElement(h.a,{component:"fieldset"},c.a.createElement(g.a,{component:"legend"},"Type"),c.a.createElement(b.a,{"aria-label":"gender",name:"gender1",value:a,onChange:function(e,t){return n((function(){return t}))}},c.a.createElement(y.a,{value:"letters",control:c.a.createElement(v.a,null),label:"letters"}),c.a.createElement(y.a,{value:"numbers",control:c.a.createElement(v.a,null),label:"numbers"}),c.a.createElement(y.a,{value:"numbersDT",control:c.a.createElement(v.a,null),label:"numbers + double + triple"}),c.a.createElement(y.a,{value:"alpha-numeric",control:c.a.createElement(v.a,null),label:"alpha-numeric"}),c.a.createElement(y.a,{value:"word",control:c.a.createElement(v.a,null),label:"word (lorem ipsum)"}))),c.a.createElement(f.a,null,c.a.createElement(G.a,{value:te||"Default Voice",onChange:function(e){return ae(e.target.value)}},c.a.createElement(X.a,{disabled:!0,value:"Default voice"},"Default Voice"),q.map((function(e,t){return c.a.createElement(X.a,{key:t,value:e},e)})))),c.a.createElement(m.a,{onClick:function(){return I(!0)}},"Start")))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[78,1,2]]]);
//# sourceMappingURL=main.4878e389.chunk.js.map